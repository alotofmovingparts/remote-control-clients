var t;!function(t){t.Connecting="CONNECTING",t.Open="OPEN",t.Closed="CLOSED"}(t||(t={}));class e extends EventTarget{constructor(e){super(),this.url=void 0,this.ws=void 0,this.state=void 0,this.url=e,this.state=t.Closed,this.addEventListener("message",t=>console.log(t))}connect(e){this.state=t.Connecting,this.ws=new WebSocket(this.url),this.ws.onopen=e=>{this.state=t.Open;const s=new Event("open");this.dispatchEvent(s)},this.ws.onclose=e=>{this.state=t.Closed;const s=new CloseEvent("close",{code:e.code});this.dispatchEvent(s)},this.ws.onmessage=t=>{const e=new MessageEvent("message",{data:t.data});this.dispatchEvent(e)},this.ws.onerror=t=>{this.dispatchEvent(t)};const s=new Event("connecting");this.dispatchEvent(s)}sendValue(t,e,s){var n;null==(n=this.ws)||n.send(JSON.stringify({name:t,value:e}))}on(t,e,s){return this.addEventListener(t,e,s)}off(t,e,s){return this.removeEventListener(t,e,s)}}export{e as default};
//# sourceMappingURL=index.modern.js.map
