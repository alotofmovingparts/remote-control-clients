{"version":3,"file":"index.module.js","sources":["../src/index.ts"],"sourcesContent":["export interface Message {\n  type: string;\n}\n\nexport class TouchControlClient extends EventTarget {\n  url: string;\n  ws?: WebSocket;\n\n  constructor(url: string) {\n    super();\n    this.url = url;\n    this.addEventListener('message', (event: Event) => console.log(event));\n  }\n\n  connect(callback?: (err: Error | null, initialValues: any, clients: any) => void) {\n    this.ws = new WebSocket(this.url);\n    this.ws.onopen = (event: Event) => {\n      const e = new Event('open');\n      this.dispatchEvent(e);\n    };\n    this.ws.onclose = (event: CloseEvent) => {\n      const e = new CloseEvent('close', {code: event.code});\n      this.dispatchEvent(e);\n    };\n    this.ws.onmessage = (event: MessageEvent) => {\n      const e = new MessageEvent('message', { data: event.data})\n      this.dispatchEvent(e);\n    };\n    this.ws.onerror = (event: Event) => {\n      this.dispatchEvent(event);\n    };\n    const e = new Event('connecting');\n    this.dispatchEvent(e);\n  }\n\n  sendValue(name: string, value: any, callback?: (err?: Error | null) => void) {\n    this.ws?.send(JSON.stringify({name, value}));\n  }\n\n  on(type: string, callback: EventListenerOrEventListenerObject | null, options?: boolean | AddEventListenerOptions): void {\n    return this.addEventListener(type, callback, options);\n  }\n\n  off(type: string, callback: EventListenerOrEventListenerObject | null, options?: EventListenerOptions | boolean): void {\n    return this.removeEventListener(type, callback, options);\n  }\n\n}"],"names":["TouchControlClient","url","_this","ws","addEventListener","event","console","log","connect","callback","this","WebSocket","onopen","e","Event","_this2","dispatchEvent","onclose","CloseEvent","code","onmessage","MessageEvent","data","onerror","sendValue","name","value","send","JSON","stringify","on","type","options","off","removeEventListener","EventTarget"],"mappings":"+nCAIaA,IAAAA,mCAIX,WAAYC,gBACVC,sBAJFD,aACAE,UAIED,EAAKD,IAAMA,EACXC,EAAKE,iBAAiB,UAAW,SAACC,UAAiBC,QAAQC,IAAIF,uFAPnE,2BAUEG,QAAA,SAAQC,cACNC,KAAKP,GAAK,IAAIQ,UAAUD,KAAKT,KAC7BS,KAAKP,GAAGS,OAAS,SAACP,GAChB,IAAMQ,EAAI,IAAIC,MAAM,QACpBC,EAAKC,cAAcH,IAErBH,KAAKP,GAAGc,QAAU,SAACZ,GACjB,IAAMQ,EAAI,IAAIK,WAAW,QAAS,CAACC,KAAMd,EAAMc,OAC/CJ,EAAKC,cAAcH,IAErBH,KAAKP,GAAGiB,UAAY,SAACf,GACnB,IAAMQ,EAAI,IAAIQ,aAAa,UAAW,CAAEC,KAAMjB,EAAMiB,OACpDP,EAAKC,cAAcH,IAErBH,KAAKP,GAAGoB,QAAU,SAAClB,GACjBU,EAAKC,cAAcX,IAErB,IAAMQ,EAAI,IAAIC,MAAM,cACpBJ,KAAKM,cAAcH,MAGrBW,UAAA,SAAUC,EAAcC,EAAYjB,uBAC7BN,OAAIwB,KAAKC,KAAKC,UAAU,CAACJ,KAAAA,EAAMC,MAAAA,QAGtCI,GAAA,SAAGC,EAActB,EAAqDuB,GACpE,YAAY5B,iBAAiB2B,EAAMtB,EAAUuB,MAG/CC,IAAA,SAAIF,EAActB,EAAqDuB,GACrE,YAAYE,oBAAoBH,EAAMtB,EAAUuB,sBAxCZG"}