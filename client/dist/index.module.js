function t(e){return t=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},t(e)}function e(t,n){return e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},e(t,n)}function n(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function o(t,r,c){return o=n()?Reflect.construct:function(t,n,o){var r=[null];r.push.apply(r,n);var c=new(Function.bind.apply(t,r));return o&&e(c,o.prototype),c},o.apply(null,arguments)}function r(n){var c="function"==typeof Map?new Map:void 0;return r=function(n){if(null===n||-1===Function.toString.call(n).indexOf("[native code]"))return n;if("function"!=typeof n)throw new TypeError("Super expression must either be null or a function");if(void 0!==c){if(c.has(n))return c.get(n);c.set(n,r)}function r(){return o(n,arguments,t(this).constructor)}return r.prototype=Object.create(n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),e(r,n)},r(n)}var c;!function(t){t.Connecting="CONNECTING",t.Open="OPEN",t.Closed="CLOSED"}(c||(c={}));var i=/*#__PURE__*/function(t){var n,o;function r(e){var n;return(n=t.call(this)||this).url=void 0,n.ws=void 0,n.state=void 0,n.url=e,n.state=c.Closed,n.addEventListener("message",function(t){return console.log(t)}),n}o=t,(n=r).prototype=Object.create(o.prototype),n.prototype.constructor=n,e(n,o);var i=r.prototype;return i.connect=function(t){var e=this;this.state=c.Connecting,this.ws=new WebSocket(this.url),this.ws.onopen=function(t){e.state=c.Open;var n=new Event("open");e.dispatchEvent(n)},this.ws.onclose=function(t){e.state=c.Closed;var n=new CloseEvent("close",{code:t.code});e.dispatchEvent(n)},this.ws.onmessage=function(t){var n=new MessageEvent("message",{data:t.data});e.dispatchEvent(n)},this.ws.onerror=function(t){e.dispatchEvent(t)};var n=new Event("connecting");this.dispatchEvent(n)},i.sendValue=function(t,e,n){var o;null==(o=this.ws)||o.send(JSON.stringify({name:t,value:e}))},i.on=function(t,e,n){return this.addEventListener(t,e,n)},i.off=function(t,e,n){return this.removeEventListener(t,e,n)},r}(/*#__PURE__*/r(EventTarget));export{i as default};
//# sourceMappingURL=index.module.js.map
