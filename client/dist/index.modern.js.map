{"version":3,"file":"index.modern.js","sources":["../src/index.ts"],"sourcesContent":["export interface Message {\n  type: string;\n}\n\nexport default class TouchControlClient extends EventTarget {\n  url: string;\n  ws?: WebSocket;\n\n  constructor(url: string) {\n    super();\n    this.url = url;\n    this.addEventListener('message', (event: Event) => console.log(event));\n  }\n\n  connect(callback?: (err: Error | null, initialValues: any, clients: any) => void) {\n    this.ws = new WebSocket(this.url);\n    this.ws.onopen = (event: Event) => {\n      const e = new Event('open');\n      this.dispatchEvent(e);\n    };\n    this.ws.onclose = (event: CloseEvent) => {\n      const e = new CloseEvent('close', {code: event.code});\n      this.dispatchEvent(e);\n    };\n    this.ws.onmessage = (event: MessageEvent) => {\n      const e = new MessageEvent('message', { data: event.data})\n      this.dispatchEvent(e);\n    };\n    this.ws.onerror = (event: Event) => {\n      this.dispatchEvent(event);\n    };\n    const e = new Event('connecting');\n    this.dispatchEvent(e);\n  }\n\n  sendValue(name: string, value: any, callback?: (err?: Error | null) => void) {\n    this.ws?.send(JSON.stringify({name, value}));\n  }\n\n  on(type: string, callback: EventListenerOrEventListenerObject | null, options?: boolean | AddEventListenerOptions): void {\n    return this.addEventListener(type, callback, options);\n  }\n\n  off(type: string, callback: EventListenerOrEventListenerObject | null, options?: EventListenerOptions | boolean): void {\n    return this.removeEventListener(type, callback, options);\n  }\n\n}"],"names":["TouchControlClient","EventTarget","constructor","url","super","ws","this","addEventListener","event","console","log","connect","callback","WebSocket","onopen","e","Event","dispatchEvent","onclose","CloseEvent","code","onmessage","MessageEvent","data","onerror","sendValue","name","value","send","JSON","stringify","on","type","options","off","removeEventListener"],"mappings":"MAIqBA,UAA2BC,YAI9CC,YAAYC,GACVC,aAJFD,gBACAE,UAIEC,KAAKH,IAAMA,EACXG,KAAKC,iBAAiB,UAAYC,GAAiBC,QAAQC,IAAIF,IAGjEG,QAAQC,GACNN,KAAKD,GAAK,IAAIQ,UAAUP,KAAKH,KAC7BG,KAAKD,GAAGS,OAAUN,IAChB,MAAMO,EAAI,IAAIC,MAAM,QACpBV,KAAKW,cAAcF,IAErBT,KAAKD,GAAGa,QAAWV,IACjB,MAAMO,EAAI,IAAII,WAAW,QAAS,CAACC,KAAMZ,EAAMY,OAC/Cd,KAAKW,cAAcF,IAErBT,KAAKD,GAAGgB,UAAab,IACnB,MAAMO,EAAI,IAAIO,aAAa,UAAW,CAAEC,KAAMf,EAAMe,OACpDjB,KAAKW,cAAcF,IAErBT,KAAKD,GAAGmB,QAAWhB,IACjBF,KAAKW,cAAcT,IAErB,MAAMO,EAAI,IAAIC,MAAM,cACpBV,KAAKW,cAAcF,GAGrBU,UAAUC,EAAcC,EAAYf,uBAC7BP,OAAIuB,KAAKC,KAAKC,UAAU,CAACJ,KAAAA,EAAMC,MAAAA,KAGtCI,GAAGC,EAAcpB,EAAqDqB,GACpE,YAAY1B,iBAAiByB,EAAMpB,EAAUqB,GAG/CC,IAAIF,EAAcpB,EAAqDqB,GACrE,YAAYE,oBAAoBH,EAAMpB,EAAUqB"}